<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MAGR Ramadan 2026/1447 Prayer Timetable</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    /* ---- LOCAL FONTS ---- */
    @font-face {
      font-family: 'Matter';
      src: url('fonts/MatterLight.otf') format('opentype');
      font-weight: 300;
      font-style: normal;
      font-display: swap;
    }
    @font-face {
      font-family: 'Matter';
      src: url('fonts/MatterRegular.otf') format('opentype');
      font-weight: 400;
      font-style: normal;
      font-display: swap;
    }
    @font-face {
      font-family: 'Matter';
      src: url('fonts/MatterMedium.otf') format('opentype');
      font-weight: 500;
      font-style: normal;
      font-display: swap;
    }
    @font-face {
      font-family: 'Matter';
      src: url('fonts/MatterSemiBold.otf') format('opentype');
      font-weight: 600;
      font-style: normal;
      font-display: swap;
    }
    @font-face {
      font-family: 'Matter';
      src: url('fonts/MatterBold.otf') format('opentype');
      font-weight: 700;
      font-style: normal;
      font-display: swap;
    }

    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      --deep-blue: #2222EB;
      --deep-blue-light: #3838F0;
      --pastel-yellow: #FFF9C4;
      --pastel-yellow-border: #FFE082;
      --pastel-red: #FFF0F0;
      --pastel-red-accent: #FFCDD2;
      --pastel-red-text: #8B2525;
      --pastel-blue: #EDF6FF;
      --pastel-blue-accent: #B3D9F7;
      --pastel-blue-text: #1A4A7A;
      --black: #111111;
      --white: #FFFFFF;
      --gray-50: #FAFAFA;
      --gray-100: #F5F5F5;
      --gray-200: #EEEEEE;
      --gray-300: #E0E0E0;
      --gray-500: #9E9E9E;
      --gray-600: #757575;
      --gray-700: #555555;
    }

    body {
      font-family: 'Matter', 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
      background: var(--gray-50);
      color: var(--black);
      line-height: 1.5;
      letter-spacing: -0.02em;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      overflow-x: hidden;
    }

    h1, h2, h3 {
      font-family: 'Matter', 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
      font-weight: 700;
      letter-spacing: -0.03em;
    }

    /* ---- LAYOUT SHELL ---- */
    #app {
      max-width: 480px;
      margin: 0 auto;
      background: var(--white);
      min-height: 100vh;
    }

    /* ---- HEADER ---- */
    header {
      background: var(--deep-blue);
      color: var(--white);
      text-align: center;
      padding: 24px 20px 28px;
    }

    .sponsor-badge {
      display: inline-block;
      margin-bottom: 20px;
      padding: 5px 16px;
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.15);
      border-radius: 20px;
      font-size: 0.65rem;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.7);
    }

    .sponsor-badge strong {
      font-weight: 600;
      display: block;
      font-size: 0.75rem;
      margin-top: 1px;
      letter-spacing: 0.04em;
      color: var(--white);
    }

    .ramadan-title { margin-top: 4px; }

    .ramadan-title h2 {
      font-size: 1.65rem;
      font-weight: 700;
      letter-spacing: -0.03em;
      display: inline-block;
      background: var(--pastel-yellow);
      color: var(--black);
      padding: 6px 20px;
      border-radius: 4px;
      margin-bottom: 12px;
    }

    .ramadan-title p {
      font-size: 0.85rem;
      font-weight: 500;
      color: var(--white);
      letter-spacing: -0.01em;
    }

    .ramadan-title .community-line {
      font-size: 0.75rem;
      font-weight: 400;
      color: rgba(255,255,255,0.7);
      margin-top: 2px;
      letter-spacing: -0.005em;
    }

    /* ---- DATE NAV ---- */
    .date-nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 16px;
      background: var(--white);
      border-bottom: 1px solid var(--gray-200);
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .nav-btn {
      width: 36px;
      height: 36px;
      border: 1px solid var(--gray-300);
      background: var(--white);
      border-radius: 50%;
      font-size: 1.1rem;
      color: var(--black);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.15s ease, border-color 0.15s ease;
      flex-shrink: 0;
    }

    .nav-btn:hover { background: var(--gray-100); border-color: var(--gray-500); }
    .nav-btn:active { background: var(--gray-200); }

    .date-display { text-align: center; flex: 1; padding: 0 8px; }

    .date-display .date-text {
      font-weight: 600;
      font-size: 0.88rem;
      color: var(--black);
      letter-spacing: -0.02em;
    }

    .date-display .ramadan-day-text {
      font-size: 0.78rem;
      color: var(--deep-blue);
      font-weight: 600;
      letter-spacing: -0.01em;
      margin-top: 1px;
    }

    /* ---- DAILY VIEW ---- */
    .daily-content {
      padding: 16px;
    }

    .day-heading {
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--black);
      text-align: center;
      margin-bottom: 16px;
      line-height: 1.35;
      letter-spacing: -0.025em;
    }

    .day-heading .day-number {
      color: var(--deep-blue);
    }

    /* ---- SUMMARY CARDS ---- */
    .summary-card {
      border-radius: 12px;
      padding: 16px 18px;
      margin-bottom: 8px;
    }

    .summary-card .card-label {
      font-size: 0.62rem;
      font-weight: 700;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      margin-bottom: 8px;
    }

    .summary-card .card-line {
      font-size: 0.88rem;
      line-height: 1.65;
      font-weight: 400;
    }

    .summary-card .card-line .time-value {
      font-weight: 700;
      font-size: 0.95rem;
    }

    .fajr-card {
      background: var(--pastel-red);
      border: 1px solid var(--pastel-red-accent);
    }

    .fajr-card .card-label { color: var(--pastel-red-text); }
    .fajr-card .time-value { color: var(--pastel-red-text); }

    .maghrib-card {
      background: var(--pastel-blue);
      border: 1px solid var(--pastel-blue-accent);
    }

    .maghrib-card .card-label { color: var(--pastel-blue-text); }
    .maghrib-card .time-value { color: var(--pastel-blue-text); }

    .tarawih-line {
      font-size: 0.88rem;
      padding-top: 8px;
      margin-top: 8px;
      border-top: 1px solid var(--pastel-blue-accent);
      color: var(--black);
      font-weight: 400;
    }

    .tarawih-line .time-value {
      font-weight: 700;
      font-size: 0.95rem;
    }

    /* ---- DIVIDER ---- */
    .section-divider {
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 20px 0 12px;
    }

    .section-divider::before,
    .section-divider::after {
      content: '';
      flex: 1;
      height: 1px;
      background: var(--gray-200);
    }

    .section-divider span {
      font-size: 0.62rem;
      font-weight: 700;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--gray-500);
      white-space: nowrap;
    }

    /* ---- PRAYER LIST ---- */
    .prayer-list { margin-bottom: 8px; }

    .prayer-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 9px 14px;
      border-radius: 8px;
    }

    .prayer-row.highlighted-red {
      background: var(--pastel-red);
      border: 1px solid var(--pastel-red-accent);
    }

    .prayer-row.highlighted-blue {
      background: var(--pastel-blue);
      border: 1px solid var(--pastel-blue-accent);
    }

    .prayer-row.iqama-row {
      padding: 3px 14px 3px 28px;
      font-size: 0.8rem;
      color: var(--gray-700);
    }

    .prayer-row.iqama-row.iqama-red {
      padding-bottom: 9px;
      margin-bottom: 3px;
      background: var(--pastel-red);
      border: 1px solid var(--pastel-red-accent);
      border-top: none;
      border-radius: 0 0 8px 8px;
    }

    .prayer-row.highlighted-red {
      border-radius: 8px 8px 0 0;
      margin-bottom: 0;
    }

    .prayer-row.iqama-row.iqama-blue {
      padding-bottom: 9px;
      margin-bottom: 3px;
      background: var(--pastel-blue);
      border: 1px solid var(--pastel-blue-accent);
      border-top: none;
      border-radius: 0 0 8px 8px;
    }

    .prayer-row.highlighted-blue {
      border-radius: 8px 8px 0 0;
      margin-bottom: 0;
    }

    .prayer-name {
      font-weight: 500;
      font-size: 0.88rem;
    }

    .prayer-time {
      font-weight: 600;
      font-size: 0.88rem;
      font-variant-numeric: tabular-nums;
    }

    .iqama-row .prayer-name { font-weight: 400; font-size: 0.78rem; }
    .iqama-row .prayer-time { font-weight: 500; font-size: 0.78rem; }

    /* ---- FRIDAY KHUTBA ---- */
    .khutba-section {
      background: var(--pastel-yellow);
      border: 1px solid var(--pastel-yellow-border);
      border-radius: 10px;
      padding: 14px 16px;
      margin: 12px 0;
    }

    .khutba-section .section-label {
      font-size: 0.62rem;
      font-weight: 700;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: #8B7000;
      margin-bottom: 6px;
    }

    .khutba-section .khutba-row {
      display: flex;
      justify-content: space-between;
      padding: 3px 0;
      font-size: 0.85rem;
    }

    /* ---- TIME CHANGE NOTICE ---- */
    .time-change-notice {
      background: var(--pastel-yellow);
      border: 1px solid var(--pastel-yellow-border);
      border-radius: 10px;
      padding: 12px 16px;
      margin-bottom: 12px;
      font-size: 0.8rem;
      line-height: 1.5;
      color: #6B5800;
    }

    .time-change-notice strong { color: #4A3D00; }

    /* ---- VIEW TOGGLE ---- */
    .view-toggle {
      display: block;
      width: 100%;
      padding: 13px;
      margin: 16px 0 8px;
      background: var(--deep-blue);
      border: none;
      border-radius: 10px;
      color: var(--white);
      font-family: 'Matter', 'Inter', sans-serif;
      font-size: 0.85rem;
      font-weight: 600;
      letter-spacing: -0.01em;
      cursor: pointer;
      transition: opacity 0.15s ease;
    }

    .view-toggle:hover { opacity: 0.9; }
    .view-toggle:active { opacity: 0.8; }

    /* ---- CALENDAR VIEW ---- */
    .calendar-content {
      padding: 16px;
    }

    .calendar-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 14px;
    }

    .calendar-header h3 {
      font-size: 1.05rem;
      color: var(--black);
      letter-spacing: -0.02em;
    }

    .back-btn {
      padding: 7px 14px;
      background: none;
      border: 1px solid var(--gray-300);
      border-radius: 8px;
      color: var(--black);
      font-family: 'Matter', 'Inter', sans-serif;
      font-size: 0.78rem;
      font-weight: 500;
      cursor: pointer;
      transition: background 0.15s ease;
      letter-spacing: -0.01em;
    }

    .back-btn:hover { background: var(--gray-100); }

    .cal-cards {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-bottom: 14px;
    }

    .cal-card {
      border: 1px solid var(--gray-200);
      border-radius: 10px;
      padding: 12px 14px;
      cursor: pointer;
      transition: background 0.15s ease;
      background: var(--white);
    }

    .cal-card:hover { background: var(--gray-50); }

    .cal-card.today-card {
      background: var(--pastel-yellow);
      border-color: var(--pastel-yellow-border);
    }

    .cal-card.today-card:hover { background: #FFF59D; }

    .cal-card-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 8px;
    }

    .cal-card-day {
      font-weight: 700;
      font-size: 0.85rem;
      color: var(--black);
      letter-spacing: -0.02em;
    }

    .cal-card-date {
      font-size: 0.75rem;
      color: var(--gray-600);
      font-weight: 400;
    }

    .cal-card-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 6px 8px;
      font-variant-numeric: tabular-nums;
    }

    .cal-card-grid .cal-cell {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .cal-cell-label {
      font-size: 0.58rem;
      font-weight: 600;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      color: var(--gray-500);
      margin-bottom: 1px;
    }

    .cal-cell-time {
      font-weight: 500;
      font-size: 0.78rem;
      color: var(--black);
    }

    .cal-cell.fajr-cell .cal-cell-label { color: var(--pastel-red-text); }
    .cal-cell.fajr-cell .cal-cell-time { color: var(--pastel-red-text); font-weight: 700; }
    .cal-cell.maghrib-cell .cal-cell-label { color: var(--pastel-blue-text); }
    .cal-cell.maghrib-cell .cal-cell-time { color: var(--pastel-blue-text); font-weight: 700; }

    /* ---- EID CARD ---- */
    .eid-card {
      background: var(--pastel-yellow);
      border: 1px solid var(--pastel-yellow-border);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      margin-bottom: 12px;
    }

    .eid-card h3 {
      color: #5A4A00;
      font-size: 1.25rem;
      margin-bottom: 2px;
    }

    .eid-card p { color: #8B7000; font-size: 0.88rem; }

    /* ---- FOOTER ---- */
    footer {
      text-align: center;
      padding: 20px 16px 32px;
      border-top: 1px solid var(--gray-200);
    }

    footer p {
      font-size: 0.68rem;
      color: var(--gray-500);
      line-height: 1.6;
    }

    /* ---- TRANSITIONS ---- */
    .fade-in {
      animation: fadeIn 0.25s ease forwards;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(4px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .hidden { display: none !important; }

    /* ---- RESPONSIVE: TABLET+ ---- */
    @media (min-width: 520px) {
      #app { max-width: 540px; }
      header { padding: 28px 28px 32px; }
      .ramadan-title h2 { font-size: 1.85rem; }
      .daily-content { padding: 20px 20px; }
      .calendar-content { padding: 20px; }
      .summary-card { padding: 18px 22px; }
    }

    /* ---- RESPONSIVE: DESKTOP ---- */
    @media (min-width: 768px) {
      body { background: var(--gray-100); }
      #app {
        max-width: 560px;
        margin: 20px auto;
        border-radius: 16px;
        overflow: hidden;
        box-shadow: 0 1px 3px rgba(0,0,0,0.06), 0 8px 24px rgba(0,0,0,0.04);
        min-height: auto;
      }
      header { padding: 32px 32px 36px; }
      .ramadan-title h2 { font-size: 2rem; padding: 8px 24px; }
      .daily-content { padding: 24px 24px; }
      .calendar-content { padding: 24px; }
      .cal-cards { gap: 8px; }
      .cal-card { padding: 14px 18px; }
      footer { padding: 20px 24px 28px; }
    }
  </style>
</head>
<body>

<div id="app">
  <header>
    <div class="sponsor-badge">
      Sponsored by<strong>Tier One Asset Management</strong>
    </div>
    <div class="ramadan-title">
      <h2>Ramadan 2026/1447</h2>
      <p>Prayer Timetable, February / March 2026</p>
      <p class="community-line">For the Rockford Muslim community.</p>
      <p class="community-line">Prayer times based on MAGR Masjid.</p>
    </div>
  </header>

  <!-- DAILY VIEW -->
  <div id="daily-view">
    <div class="date-nav">
      <button class="nav-btn" id="prev-btn" aria-label="Previous day">&#8249;</button>
      <div class="date-display">
        <div class="date-text" id="date-text"></div>
        <div class="ramadan-day-text" id="ramadan-day-text"></div>
      </div>
      <button class="nav-btn" id="next-btn" aria-label="Next day">&#8250;</button>
    </div>

    <div class="daily-content fade-in" id="daily-content"></div>
  </div>

  <!-- CALENDAR VIEW -->
  <div id="calendar-view" class="hidden">
    <div class="calendar-content">
      <div class="calendar-header">
        <h3>Full Calendar</h3>
        <button class="back-btn" id="back-to-daily">Back to Daily</button>
      </div>
      <div class="cal-cards" id="cal-cards"></div>
      <div class="time-change-notice" style="margin-top:8px;">
        <strong>Spring Ahead</strong> &mdash; Clocks move forward one hour. Adjust clocks before bed on Saturday, March 7, 2026. Sunday, March 8 prayer times shift accordingly.
      </div>
      <button class="view-toggle" id="back-to-daily-2">Back to Daily View</button>
    </div>
  </div>

  <footer>
    <p>Ramadan 2026/1447 / February&ndash;March 2026<br>
    Sponsored by Tier One Asset Management</p>
  </footer>
</div>

<script>
(function() {
  'use strict';

  /* ======== PRAYER DATA ======== */
  const days = [
    { dow:'Mon', rd:'6',  dt:'23-Feb', dk:'2026-02-23', fajr:'5:23 AM', sunrise:'6:40 AM', duha:'6:55 AM', zuhr:'12:10 PM', asr:'3:11 PM', maghrib:'5:40 PM', isha:'6:57 PM', tc:false },
    { dow:'Tue', rd:'7',  dt:'24-Feb', dk:'2026-02-24', fajr:'5:21 AM', sunrise:'6:38 AM', duha:'6:53 AM', zuhr:'12:10 PM', asr:'3:12 PM', maghrib:'5:41 PM', isha:'6:58 PM', tc:false },
    { dow:'Wed', rd:'8',  dt:'25-Feb', dk:'2026-02-25', fajr:'5:20 AM', sunrise:'6:37 AM', duha:'6:52 AM', zuhr:'12:09 PM', asr:'3:13 PM', maghrib:'5:42 PM', isha:'6:59 PM', tc:false },
    { dow:'Thu', rd:'9',  dt:'26-Feb', dk:'2026-02-26', fajr:'5:18 AM', sunrise:'6:35 AM', duha:'6:50 AM', zuhr:'12:09 PM', asr:'3:14 PM', maghrib:'5:43 PM', isha:'7:01 PM', tc:false },
    { dow:'Fri', rd:'10', dt:'27-Feb', dk:'2026-02-27', fajr:'5:16 AM', sunrise:'6:33 AM', duha:'6:48 AM', zuhr:'12:09 PM', asr:'3:14 PM', maghrib:'5:44 PM', isha:'7:02 PM', tc:false },
    { dow:'Sat', rd:'11', dt:'28-Feb', dk:'2026-02-28', fajr:'5:15 AM', sunrise:'6:32 AM', duha:'6:47 AM', zuhr:'12:09 PM', asr:'3:15 PM', maghrib:'5:46 PM', isha:'7:03 PM', tc:false },
    { dow:'Sun', rd:'12', dt:'1-Mar',  dk:'2026-03-01', fajr:'5:14 AM', sunrise:'6:31 AM', duha:'6:46 AM', zuhr:'12:09 PM', asr:'3:16 PM', maghrib:'5:47 PM', isha:'7:04 PM', tc:false },
    { dow:'Mon', rd:'13', dt:'2-Mar',  dk:'2026-03-02', fajr:'5:12 AM', sunrise:'6:29 AM', duha:'6:44 AM', zuhr:'12:09 PM', asr:'3:17 PM', maghrib:'5:48 PM', isha:'7:05 PM', tc:false },
    { dow:'Tue', rd:'14', dt:'3-Mar',  dk:'2026-03-03', fajr:'5:11 AM', sunrise:'6:27 AM', duha:'6:42 AM', zuhr:'12:08 PM', asr:'3:17 PM', maghrib:'5:49 PM', isha:'7:06 PM', tc:false },
    { dow:'Wed', rd:'15', dt:'4-Mar',  dk:'2026-03-04', fajr:'5:09 AM', sunrise:'6:26 AM', duha:'6:41 AM', zuhr:'12:08 PM', asr:'3:18 PM', maghrib:'5:50 PM', isha:'7:07 PM', tc:false },
    { dow:'Thu', rd:'16', dt:'5-Mar',  dk:'2026-03-05', fajr:'5:07 AM', sunrise:'6:24 AM', duha:'6:39 AM', zuhr:'12:08 PM', asr:'3:19 PM', maghrib:'5:51 PM', isha:'7:09 PM', tc:false },
    { dow:'Fri', rd:'17', dt:'6-Mar',  dk:'2026-03-06', fajr:'5:06 AM', sunrise:'6:23 AM', duha:'6:38 AM', zuhr:'12:08 PM', asr:'3:20 PM', maghrib:'5:53 PM', isha:'7:10 PM', tc:false },
    { dow:'Sat', rd:'18', dt:'7-Mar',  dk:'2026-03-07', fajr:'5:04 AM', sunrise:'6:21 AM', duha:'6:36 AM', zuhr:'12:07 PM', asr:'3:21 PM', maghrib:'5:54 PM', isha:'7:11 PM', tc:false },
    { dow:'Sun', rd:'19', dt:'8-Mar',  dk:'2026-03-08', fajr:'6:02 AM', sunrise:'7:19 AM', duha:'7:34 AM', zuhr:'1:07 PM',  asr:'4:21 PM', maghrib:'6:55 PM', isha:'8:12 PM', tc:true },
    { dow:'Mon', rd:'20', dt:'9-Mar',  dk:'2026-03-09', fajr:'6:01 AM', sunrise:'7:17 AM', duha:'7:32 AM', zuhr:'1:07 PM',  asr:'4:22 PM', maghrib:'6:56 PM', isha:'8:13 PM', tc:false },
    { dow:'Tue', rd:'21', dt:'10-Mar', dk:'2026-03-10', fajr:'5:59 AM', sunrise:'7:16 AM', duha:'7:31 AM', zuhr:'1:07 PM',  asr:'4:23 PM', maghrib:'6:57 PM', isha:'8:15 PM', tc:false },
    { dow:'Wed', rd:'22', dt:'11-Mar', dk:'2026-03-11', fajr:'5:57 AM', sunrise:'7:14 AM', duha:'7:29 AM', zuhr:'1:06 PM',  asr:'4:23 PM', maghrib:'6:59 PM', isha:'8:16 PM', tc:false },
    { dow:'Thu', rd:'23', dt:'12-Mar', dk:'2026-03-12', fajr:'5:55 AM', sunrise:'7:12 AM', duha:'7:27 AM', zuhr:'1:06 PM',  asr:'4:24 PM', maghrib:'7:00 PM', isha:'8:17 PM', tc:false },
    { dow:'Fri', rd:'24', dt:'13-Mar', dk:'2026-03-13', fajr:'5:54 AM', sunrise:'7:11 AM', duha:'7:26 AM', zuhr:'1:06 PM',  asr:'4:25 PM', maghrib:'7:01 PM', isha:'8:18 PM', tc:false },
    { dow:'Sat', rd:'25', dt:'14-Mar', dk:'2026-03-14', fajr:'5:52 AM', sunrise:'7:09 AM', duha:'7:24 AM', zuhr:'1:06 PM',  asr:'4:25 PM', maghrib:'7:02 PM', isha:'8:19 PM', tc:false },
    { dow:'Sun', rd:'26', dt:'15-Mar', dk:'2026-03-15', fajr:'5:50 AM', sunrise:'7:07 AM', duha:'7:22 AM', zuhr:'1:05 PM',  asr:'4:26 PM', maghrib:'7:03 PM', isha:'8:21 PM', tc:false },
    { dow:'Mon', rd:'27', dt:'16-Mar', dk:'2026-03-16', fajr:'5:48 AM', sunrise:'7:06 AM', duha:'7:21 AM', zuhr:'1:05 PM',  asr:'4:27 PM', maghrib:'7:04 PM', isha:'8:22 PM', tc:false },
    { dow:'Tue', rd:'28', dt:'17-Mar', dk:'2026-03-17', fajr:'5:47 AM', sunrise:'7:04 AM', duha:'7:19 AM', zuhr:'1:05 PM',  asr:'4:27 PM', maghrib:'7:05 PM', isha:'8:23 PM', tc:false },
    { dow:'Wed', rd:'29', dt:'18-Mar', dk:'2026-03-18', fajr:'5:45 AM', sunrise:'7:02 AM', duha:'7:17 AM', zuhr:'1:05 PM',  asr:'4:28 PM', maghrib:'7:07 PM', isha:'8:24 PM', tc:false },
    { dow:'Thu', rd:'30', dt:'19-Mar', dk:'2026-03-19', fajr:'5:43 AM', sunrise:'7:00 AM', duha:'7:15 AM', zuhr:'1:04 PM',  asr:'4:29 PM', maghrib:'7:08 PM', isha:'8:26 PM', tc:false },
    { dow:'Fri', rd:'Shawwal 1', dt:'20-Mar', dk:'2026-03-20', fajr:'5:41 AM', sunrise:'6:59 AM', duha:'7:15 AM', zuhr:'1:04 PM', asr:'4:29 PM', maghrib:'7:09 PM', isha:'8:27 PM', tc:false }
  ];

  /* ======== UTILITIES ======== */
  function addMinutes(timeStr, mins) {
    var m = timeStr.match(/(\d+):(\d+)\s*(AM|PM)/i);
    if (!m) return timeStr;
    var h = parseInt(m[1]), mn = parseInt(m[2]), p = m[3].toUpperCase();
    var h24 = h;
    if (p === 'PM' && h !== 12) h24 += 12;
    if (p === 'AM' && h === 12) h24 = 0;
    var total = h24 * 60 + mn + mins;
    h24 = Math.floor(total / 60) % 24;
    mn = total % 60;
    var np = h24 >= 12 ? 'PM' : 'AM';
    var h12 = h24 % 12;
    if (h12 === 0) h12 = 12;
    return h12 + ':' + String(mn).padStart(2, '0') + ' ' + np;
  }

  function ordinal(n) {
    var num = parseInt(n);
    if (isNaN(num)) return n;
    var s = ['th','st','nd','rd'];
    var v = num % 100;
    return num + (s[(v - 20) % 10] || s[v] || s[0]);
  }

  function formatDateLong(dk) {
    var parts = dk.split('-');
    var d = new Date(parseInt(parts[0]), parseInt(parts[1]) - 1, parseInt(parts[2]));
    var dayNames = ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];
    var monthNames = ['January','February','March','April','May','June','July','August','September','October','November','December'];
    return dayNames[d.getDay()] + ', ' + monthNames[d.getMonth()] + ' ' + d.getDate();
  }

  function getIqama(dk, fajr, maghrib) {
    var zuhrIq = '1:10 PM';
    var fajrIq = (dk === '2026-03-20') ? '6:00 AM' : addMinutes(fajr, 25);
    var maghribIq = (dk >= '2026-03-20') ? addMinutes(maghrib, 10) : addMinutes(maghrib, 20);
    var asrIq = (dk < '2026-02-28') ? '3:30 PM' : '5:15 PM';
    var ishaIq = (dk < '2026-03-08') ? '8:00 PM' : '9:00 PM';
    return { fajrIq:fajrIq, zuhrIq:zuhrIq, asrIq:asrIq, maghribIq:maghribIq, ishaIq:ishaIq };
  }

  function isRamadan(day) { return day.rd !== 'Shawwal 1'; }
  function isFriday(day) { return day.dow === 'Fri'; }

  /* ======== STATE ======== */
  var currentIndex = 0;
  var todayKey = (function() {
    var n = new Date();
    return n.getFullYear() + '-' + String(n.getMonth()+1).padStart(2,'0') + '-' + String(n.getDate()).padStart(2,'0');
  })();

  for (var i = 0; i < days.length; i++) {
    if (days[i].dk === todayKey) { currentIndex = i; break; }
  }

  /* ======== RENDER DAILY VIEW ======== */
  function renderDaily() {
    var day = days[currentIndex];
    var iq = getIqama(day.dk, day.fajr, day.maghrib);
    var isEid = !isRamadan(day);
    var isFri = isFriday(day);
    var isToday = day.dk === todayKey;

    document.getElementById('date-text').textContent = formatDateLong(day.dk);
    document.getElementById('ramadan-day-text').textContent = isEid ? 'Shawwal 1 / Eid al-Fitr' : 'Ramadan ' + day.rd;

    var html = '';

    if (isEid) {
      html += '<div class="eid-card"><h3>Eid Mubarak</h3><p>Shawwal 1 &mdash; Eid al-Fitr</p></div>';
      html += '<div class="summary-card fajr-card">';
      html += '<div class="card-label">Eid Prayer</div>';
      html += '<div class="card-line">Eid prayer at the masjid is at <span class="time-value">' + (iq.fajrIq || '\u2014') + '</span></div>';
      html += '</div>';
    } else {
      if (isToday) {
        html += '<div class="day-heading">Today is the <span class="day-number">' + ordinal(day.rd) + '</span> day of Ramadan</div>';
      } else {
        html += '<div class="day-heading">' + formatDateLong(day.dk) + ' is the <span class="day-number">' + ordinal(day.rd) + '</span> day of Ramadan</div>';
      }

      html += '<div class="summary-card fajr-card">';
      html += '<div class="card-label">Suhoor Ends / Fajr Adhan</div>';
      html += '<div class="card-line">The fast starts at <span class="time-value">' + day.fajr + '</span></div>';
      html += '<div class="card-line">Fajr at the masjid is at <span class="time-value">' + iq.fajrIq + '</span></div>';
      html += '</div>';

      html += '<div class="summary-card maghrib-card">';
      html += '<div class="card-label">Iftar / Maghrib Adhan</div>';
      html += '<div class="card-line">The fast ends at <span class="time-value">' + day.maghrib + '</span></div>';
      html += '<div class="card-line">Maghrib at the masjid is at <span class="time-value">' + iq.maghribIq + '</span></div>';
      html += '<div class="tarawih-line">Tarawih is at <span class="time-value">' + iq.ishaIq + '</span></div>';
      html += '</div>';
    }

    if (day.dk >= '2026-03-05' && day.dk <= '2026-03-08') {
      html += '<div class="time-change-notice">';
      html += '<strong>Spring Ahead &mdash; Time Change</strong><br>';
      html += 'Clocks move forward ONE hour. Move clocks one hour ahead before going to bed on Saturday, March 7, 2026, so that on <strong>Sunday, March 8</strong> prayer times adjust accordingly.';
      html += '</div>';
    }

    if (isFri && isRamadan(day)) {
      html += '<div class="khutba-section">';
      html += '<div class="section-label">Friday Khutba</div>';
      html += '<div class="khutba-row"><span>First Khutba</span><span>1:05 PM</span></div>';
      html += '<div class="khutba-row"><span>Second Khutba</span><span>2:05 PM</span></div>';
      html += '</div>';
    }

    html += '<div class="section-divider"><span>All Prayer Times</span></div>';

    html += '<div class="prayer-list">';

    html += '<div class="prayer-row highlighted-red"><span class="prayer-name">Fajr</span><span class="prayer-time">' + day.fajr + '</span></div>';
    html += '<div class="prayer-row iqama-row iqama-red"><span class="prayer-name">Iqama</span><span class="prayer-time">' + iq.fajrIq + '</span></div>';

    html += '<div class="prayer-row"><span class="prayer-name">Sunrise</span><span class="prayer-time">' + day.sunrise + '</span></div>';
    html += '<div class="prayer-row"><span class="prayer-name">Duha</span><span class="prayer-time">' + day.duha + '</span></div>';

    html += '<div class="prayer-row"><span class="prayer-name">Zuhr</span><span class="prayer-time">' + day.zuhr + '</span></div>';
    html += '<div class="prayer-row iqama-row"><span class="prayer-name">Iqama</span><span class="prayer-time">' + iq.zuhrIq + '</span></div>';

    html += '<div class="prayer-row"><span class="prayer-name">Asr</span><span class="prayer-time">' + day.asr + '</span></div>';
    html += '<div class="prayer-row iqama-row"><span class="prayer-name">Iqama</span><span class="prayer-time">' + iq.asrIq + '</span></div>';

    html += '<div class="prayer-row highlighted-blue"><span class="prayer-name">Maghrib</span><span class="prayer-time">' + day.maghrib + '</span></div>';
    html += '<div class="prayer-row iqama-row iqama-blue"><span class="prayer-name">Iqama</span><span class="prayer-time">' + iq.maghribIq + '</span></div>';

    html += '<div class="prayer-row"><span class="prayer-name">Isha</span><span class="prayer-time">' + day.isha + '</span></div>';
    if (isRamadan(day)) {
      html += '<div class="prayer-row iqama-row"><span class="prayer-name">Tarawih</span><span class="prayer-time">' + iq.ishaIq + '</span></div>';
    } else {
      html += '<div class="prayer-row iqama-row"><span class="prayer-name">Iqama</span><span class="prayer-time">' + iq.ishaIq + '</span></div>';
    }

    html += '</div>';

    html += '<button class="view-toggle" id="show-calendar-btn">View Full Calendar</button>';

    var container = document.getElementById('daily-content');
    container.innerHTML = html;
    container.classList.remove('fade-in');
    void container.offsetWidth;
    container.classList.add('fade-in');

    document.getElementById('show-calendar-btn').addEventListener('click', showCalendar);
  }

  /* ======== RENDER CALENDAR ======== */
  function renderCalendar() {
    var html = '';

    for (var i = 0; i < days.length; i++) {
      var d = days[i];
      var isToday = d.dk === todayKey;
      var isEid = !isRamadan(d);
      var cardClass = 'cal-card' + (isToday ? ' today-card' : '');

      html += '<div class="' + cardClass + '" data-index="' + i + '">';
      html += '<div class="cal-card-header">';
      html += '<span class="cal-card-day">' + (isEid ? 'Eid al-Fitr' : 'Ramadan ' + d.rd) + '</span>';
      html += '<span class="cal-card-date">' + d.dow + ', ' + d.dt + (d.tc ? ' *' : '') + '</span>';
      html += '</div>';

      html += '<div class="cal-card-grid">';
      html += '<div class="cal-cell fajr-cell"><span class="cal-cell-label">Fajr</span><span class="cal-cell-time">' + d.fajr + '</span></div>';
      html += '<div class="cal-cell"><span class="cal-cell-label">Sunrise</span><span class="cal-cell-time">' + d.sunrise + '</span></div>';
      html += '<div class="cal-cell"><span class="cal-cell-label">Zuhr</span><span class="cal-cell-time">' + d.zuhr + '</span></div>';
      html += '<div class="cal-cell"><span class="cal-cell-label">Asr</span><span class="cal-cell-time">' + d.asr + '</span></div>';
      html += '<div class="cal-cell maghrib-cell"><span class="cal-cell-label">Maghrib</span><span class="cal-cell-time">' + d.maghrib + '</span></div>';
      html += '<div class="cal-cell"><span class="cal-cell-label">Isha</span><span class="cal-cell-time">' + d.isha + '</span></div>';
      html += '</div>';

      html += '</div>';
    }

    document.getElementById('cal-cards').innerHTML = html;

    var cards = document.querySelectorAll('.cal-card');
    cards.forEach(function(card) {
      card.addEventListener('click', function() {
        currentIndex = parseInt(this.getAttribute('data-index'));
        showDaily();
      });
    });

    setTimeout(function() {
      var todayCard = document.querySelector('.today-card');
      if (todayCard) {
        todayCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
      }
    }, 100);
  }

  /* ======== VIEW SWITCHING ======== */
  function showCalendar() {
    document.getElementById('daily-view').classList.add('hidden');
    document.getElementById('calendar-view').classList.remove('hidden');
    renderCalendar();
  }

  function showDaily() {
    document.getElementById('calendar-view').classList.add('hidden');
    document.getElementById('daily-view').classList.remove('hidden');
    renderDaily();
  }

  /* ======== NAVIGATION ======== */
  document.getElementById('prev-btn').addEventListener('click', function() {
    if (currentIndex > 0) { currentIndex--; renderDaily(); }
  });

  document.getElementById('next-btn').addEventListener('click', function() {
    if (currentIndex < days.length - 1) { currentIndex++; renderDaily(); }
  });

  document.getElementById('back-to-daily').addEventListener('click', showDaily);
  document.getElementById('back-to-daily-2').addEventListener('click', showDaily);

  var touchStartX = 0;
  var touchStartY = 0;
  var dailyView = document.getElementById('daily-view');

  dailyView.addEventListener('touchstart', function(e) {
    touchStartX = e.changedTouches[0].screenX;
    touchStartY = e.changedTouches[0].screenY;
  }, { passive: true });

  dailyView.addEventListener('touchend', function(e) {
    var dx = touchStartX - e.changedTouches[0].screenX;
    var dy = touchStartY - e.changedTouches[0].screenY;
    if (Math.abs(dx) > 100 && Math.abs(dx) > Math.abs(dy) * 1.5) {
      if (dx > 0 && currentIndex < days.length - 1) {
        currentIndex++;
        renderDaily();
      } else if (dx < 0 && currentIndex > 0) {
        currentIndex--;
        renderDaily();
      }
    }
  }, { passive: true });

  document.addEventListener('keydown', function(e) {
    if (document.getElementById('calendar-view').classList.contains('hidden')) {
      if (e.key === 'ArrowLeft' && currentIndex > 0) {
        currentIndex--;
        renderDaily();
      } else if (e.key === 'ArrowRight' && currentIndex < days.length - 1) {
        currentIndex++;
        renderDaily();
      }
    }
  });

  /* ======== INIT ======== */
  renderDaily();

})();
</script>

</body>
</html>
